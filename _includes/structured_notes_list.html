<!-- Overview (Home.md) -->
{% assign overview = site.notes | where: "path", "_notes/Home.md" | first %}
{% if overview %}
  <ul class="post-list">
    <li class="post-list-item">
      <p class="post-meta">
        <a href="{{ overview.url | relative_url }}">Overview</a>
      </p>
    </li>
  </ul>
{% endif %}

{% comment %}
  Group the rest of the notes by their top-level folder, excluding Home.md.
{% endcomment %}
{% assign other_notes = site.notes | reject: "path", "_notes/Home.md" | sort: 'path' %}
{% assign grouped = other_notes | group_by_exp: "note", "note.path | split: '/' | slice: 1, 1 | first" %}

<ul class="post-list">
  {% for group in grouped %}
    <li class="post-list-item">
      <p class="post-meta"><strong>{{ group.name }}</strong></p>
      <ul>
        {% assign subnotes = group.items | sort: 'path' %}
        {% for note in subnotes %}
          <li>
            <p class="post-meta">
              <a href="{{ note.url | relative_url }}">
                {{ note.title | default: note.path | split: '/' | last | remove: '.md' }}
              </a>
              {% if note.vault %}
                â€¢ Vault: {{ note.vault }}
              {% endif %}
            </p>

            {% if note.excerpt and note.excerpt != "" %}
              <p class="post-excerpt">
                {{ note.excerpt }}
              </p>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </li>
  {% endfor %}
</ul>
